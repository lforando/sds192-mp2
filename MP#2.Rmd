---
title: "Mp2"
author:
output:
  html_preview: false
      code_folding: hide
---

```{r setup, include=FALSE}
library(tidyverse)
```


```{r, eval=TRUE}
load("house_elections.rda")
load("candidates.rda")
load("committees.rda")
load("contributions.rda")
```

```{r}
florida_elections <- house_elections %>%
  filter(state == "FL") %>%
  select(state, candidate_name, party, general_votes, ge_winner)

glimpse(florida_elections)
glimpse(house_elections)
```


```{r}
florida_candidates <- candidates %>%
  filter(cand_election_yr > 2010 & cand_election_yr < 2013) %>%
  filter(cand_party_affiliation != "UNK") %>%
  filter(cand_office_state == "FL") %>%
  select(cand_id, cand_name, cand_party_affiliation,) %>%
  rename(candidate_name = cand_name)

glimpse(florida_candidates)
#glimpse(candidates)
```

```{r}
florida_committees <- committees %>%
  select(cmte_id, cmte_name, tres_name)

glimpse(florida_committees)
```

```{r}
florida_contributions <- contributions %>%
  select(cmte_id, amndt_ind, transaction_pgi, name, transaction_amt, cand_id, tran_id, transaction_type) %>%
  filter(transaction_type == "24E" | transaction_type == "24A")


florida_opposing <- florida_contributions %>%
  filter(transaction_type == "24E")

florida_infavor <- florida_contributions %>%
  filter(transaction_type == "24A")

glimpse(florida_infavor)
glimpse(florida_opposing)
```


```{r}
florida_infavor_contributions <- florida_infavor %>%
  full_join(florida_committees, by = "cmte_id") %>%
  full_join(florida_candidates, by = "cand_id") %>%
  full_join(florida_elections, by = "candidate_name") %>%
  filter(cand_party_affiliation == "REP" | cand_party_affiliation == "DEM") %>%
  select(cmte_id, amndt_ind, transaction_pgi, name, transaction_amt, cand_id, tran_id, transaction_type, cmte_name, tres_name, candidate_name, cand_party_affiliation) 
  
  
  
 
florida_opposing_contributions <- florida_opposing %>%
  full_join(florida_committees, by = "cmte_id") %>%
  full_join(florida_candidates, by = "cand_id") %>%
  full_join(florida_elections, by = "candidate_name") %>%
  filter(cand_party_affiliation == "REP" | cand_party_affiliation == "DEM") %>%
  select(cmte_id, amndt_ind, transaction_pgi, name, transaction_amt, cand_id, tran_id, transaction_type, cmte_name, tres_name, candidate_name, cand_party_affiliation)
  
  

glimpse(florida_infavor_contributions)
glimpse(florida_opposing_contributions)
```





